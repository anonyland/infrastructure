server {  
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    gzip on;

    server_name anonymousland.org;

    add_header Onion-Location http://vqajogx2cyooddrtai62pzj4v346kwnfiru2fa2fftemae47rgpeglqd.onion$request_uri;

    include /config/nginx/ssl.conf;

     location /.well-known/matrix/ {                                                                                                                    
         root /config/well-known/matrix;
         rewrite /.well-known/matrix/(.*) /$1 break;
         default_type application/json;
         add_header Access-Control-Allow-Origin *;                                                                  
     }    

    location / {                                                                                                      
        include /config/nginx/proxy.conf;                                                                             
        include /config/nginx/resolver.conf;                                                                          
        set $upstream_app site;                                                                                      
        set $upstream_port 4000;                                                                                      
        set $upstream_proto http;                                                                                     
        proxy_pass $upstream_proto://$upstream_app:$upstream_port;                                                    
    }    

#    location / {
#        root /config/www;
#        index index.html;
#    }

}
